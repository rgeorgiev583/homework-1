# TestCase Homework

Вашата задача е да напишете модул с име `TestCase`, в който ще си дефинираме структура, която ще държи нашите тестове.

Тестовете ни ще бъдат прости функции с арност 0 и ще имат 5 състояния:

  1. Преди да бъде пуснат - може да го бележим с `nil`
  2. Минал - `:passed`
  3. Провалил се - `:failed`
  4. Пропуснат - `:skipped`
  5. Не минал за известно време - `:timed_out`

## Какъв ще е интерфейсът на модула TestCase, който ще искаме от вас?

Ще трябва да можем да създаваме нови тестове случаи с функцията `new`.

Пример:

```
TestCase.new
```

Като можем да подадем масив от тестове:

```
# Всеки тест е проста анонимна функция.
f = fn -> 3 = 3 end
g = fn -> 3 = 4 end

TestCase.new([f, g])
```

Ще трябва да можем да добавяме още тестове с функцията `add`:

```
f = fn -> 3 = 3 end

TestCase.new() |> TestCase.add(f)
```

Понякога имаме интеграционни тестове, които не искаме да ги пускаме с останалите, за това `add` ще приема опционални аргументи, с които можем да казваме дали да пропуснем някой тест.

```
f = fn -> .... very slow ... end

TestCase.new() |> TestCase.add(f, skip: true)
```

Също така да проверяваме колко теста имаме `size`:

```
TestCase.new() |> TestCase.size()
# => 0
```

Ще трябва да можем да пускаме тестовете с функцията `run`:

```
f = fn -> 3 = 3 end
g = fn -> 3 = 4 end

# Това ще го използваме нататък
ran = TestCase.new()
      |> TestCase.add(f)
      |> TestCase.add(g)
      |> TestCase.run()
```


Впрочем, казах ли, че можем да дадем време за изпълнение на всеки тест?

```
f = fn -> :timer.sleep(10_000) end

TestCase.new([t]) |> TestCase.run(timeout: 5_000)
# Накрая теста ни трябва да е в състояние timeout.
```

Времето по подразбиране е *5 секунди*(като това в горния пример)

Искаме да виждаме, кои тестове са минали с функцията `passed` - тя ще филтрира тестовете:

```
TestCase.passed(ran) |> TestCase.size()
# => 1
```

Всъщност се очаква да има фукции `timed_out`, `failed` и `skipped`, които правят същото като `passed`, но за съответните състояния.

Искаме и функция `ran?`, която ни казва дали сме пускали тестовете на една структура:

```
TestCase.new |> TestCase.ran? # => false
TestCase.ran?(ran) # => true
```

Спомняте ли си протоколите? Супер. Понеже сме готини, искаме `inspect` да ни дава полезна информация за тестовете:

```
t = TestCase.new()

inspect(t) #=> "#TestCase<0 tests>"
```

Ако сме пускали тестовете, това ще изглежда по друг начин:

```
inspect(ran) #=> "#TestCase<2 tests:.F>"
```

Където всеки минал тест ще го показваме като ".", всеки провали се като "F", всеки пропуснат с "S", всеки, който не е минал за допустимо време - "T"
Както виждаме - важен е редът, в който добавяме тестове!

# Бонус точки

Накарайте тестовете да вървят конкурентно ;)
